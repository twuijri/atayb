# โ ุฅุนุฏุงุฏ ูุงูู - Portainer + ุฅุฏุงุฑุฉ ุงูุฅุนุฏุงุฏุงุช

## ๐ ุงููุฒุงูุง ุงูุฌุฏูุฏุฉ

### โจ ูุง ุชู ุฅุถุงูุชู:

#### 1. ุตูุญุฉ ุฅุนุฏุงุฏุงุช ูู ููุญุฉ ุงูุชุญูู
- **ุงููููุน**: `/admin/settings`
- **ุงููุตูู**: ุฒุฑ "ุงูุฅุนุฏุงุฏุงุช" ูู ุงูุฏุงุดุจูุฑุฏ
- **ุงููุฒุงูุง**:
  - โ ุชุนุฏูู ูุนูููุงุช Supabase ุจุฏูู ุฅุนุงุฏุฉ ูุดุฑ
  - โ ุชุบููุฑ ุงุณู ุงููุณุชุฎุฏู ููููุฉ ุงููุฑูุฑ
  - โ ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
  - โ ุฅุฎูุงุก/ุฅุธูุงุฑ ุงูููุงุชูุญ ูุงููููุงุช ุงูุณุฑูุฉ

#### 2. ูุธุงู ุชุฎุฒูู ูุญูู
- **ุงูููู**: `data/config.json`
- **ุงูุญูุธ**: ูู Volume `atayb-data`
- **ุงูุฃููููุฉ**: ุงูููู ุงููุญูู > ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ

#### 3. API Endpoints ุฌุฏูุฏุฉ
- `GET /api/admin/settings` - ูุฑุงุกุฉ ุงูุฅุนุฏุงุฏุงุช
- `POST /api/admin/settings` - ุญูุธ ุงูุฅุนุฏุงุฏุงุช
- `POST /api/admin/test-connection` - ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุจู Supabase

---

## ๐ ุงููููุงุช ุงููุถุงูุฉ/ุงููุนุฏูุฉ

### ูููุงุช ุฌุฏูุฏุฉ:
```
app/
  admin/
    settings/
      page.js              โ ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช
      settings.module.css  โ ุชูุณููุงุช ุงูุตูุญุฉ
  api/
    admin/
      settings/
        route.js           โ API ุญูุธ/ูุฑุงุกุฉ ุงูุฅุนุฏุงุฏุงุช
      test-connection/
        route.js           โ API ุงุฎุชุจุงุฑ ุงูุงุชุตุงู

SETTINGS_GUIDE.md          โ ุฏููู ุงุณุชุฎุฏุงู ุงูุฅุนุฏุงุฏุงุช
```

### ูููุงุช ูุนุฏูุฉ:
```
lib/supabase.js                      โ ููุฑุฃ ูู config.json ุฃููุงู
app/admin/dashboard/page.js         โ ุฅุถุงูุฉ ุฒุฑ ุงูุฅุนุฏุงุฏุงุช
app/admin/dashboard/dashboard.module.css  โ CSS ุงูุฒุฑ
app/api/auth/login/route.js         โ ููุฑุฃ ูุนูููุงุช ุงูุฏุฎูู ูู config.json
DEPLOYMENT_SUMMARY.md                โ ุชุญุฏูุซ ุงููุซุงุฆู
```

---

## ๐ ุทุฑููุฉ ุงูุงุณุชุฎุฏุงู

### ุงูุณููุงุฑูู 1: ูุดุฑ ุฌุฏูุฏ

1. **ุจูุงุก ุงูุตูุฑุฉ**:
   ```bash
   ./build-and-deploy.sh
   ```

2. **ุงููุดุฑ ุนูู Portainer**:
   - Stacks โ Add Stack
   - ุงูุณุฎ `docker-compose.yml`
   - ุฃุถู ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ ูู `.env.portainer`
   - Deploy

3. **ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ููุญุฉ ุงูุชุญูู**:
   - ุณุฌู ุฏุฎูู: `http://server:3000/admin`
   - ุงุถุบุท "ุงูุฅุนุฏุงุฏุงุช"
   - ุฃุฏุฎู ุจูุงูุงุช Supabase
   - ุงุฎุชุจุฑ ุงูุงุชุตุงู
   - ุงุญูุธ
   - ุฃุนุฏ ุชุดุบูู ุงูู Container

### ุงูุณููุงุฑูู 2: ุชุบููุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช

ุฅุฐุง ุฃุฑุฏุช ุชุบููุฑ Supabase project:

1. ุงุฐูุจ ูู `/admin/settings`
2. ุฃุฏุฎู ุจูุงูุงุช ุงููุดุฑูุน ุงูุฌุฏูุฏ:
   - Project URL ุงูุฌุฏูุฏ
   - Anon Key ุงูุฌุฏูุฏ
   - Service Role Key ุงูุฌุฏูุฏ
3. ุงุฎุชุจุฑ ุงูุงุชุตุงู
4. ุงุญูุธ
5. ุฃุนุฏ ุชุดุบูู: `docker restart atayb-app`

### ุงูุณููุงุฑูู 3: ุชุญุฏูุซ ูููุฉ ุงููุฑูุฑ

ูุชุบููุฑ ูููุฉ ูุฑูุฑ ุงูุฃุฏูู ุจุนุฏ ุงููุดุฑ:

1. ุณุฌู ุฏุฎูู ุจูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ
2. ุงุฐูุจ ูู `/admin/settings`
3. ูู ูุณู "ูุนูููุงุช ุชุณุฌูู ุงูุฏุฎูู":
   - ุฃุฏุฎู ุงุณู ูุณุชุฎุฏู ุฌุฏูุฏ (ุงุฎุชูุงุฑู)
   - ุฃุฏุฎู ูููุฉ ูุฑูุฑ ุฌุฏูุฏุฉ
4. ุงุญูุธ
5. ุณุฌู ุฎุฑูุฌ
6. ุณุฌู ุฏุฎูู ุจุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ

---

## ๐ ููู ูุนูู ุงููุธุงู

### ุชุฑุชูุจ ูุฑุงุกุฉ ุงูุฅุนุฏุงุฏุงุช:

```
1. data/config.json (ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช) โ ุฃููุงู
   โ ุฅุฐุง ูู ููุฌุฏ
2. Environment Variables (ูู Portainer)  โ ุซุงููุงู
   โ ุฅุฐุง ูู ุชูุฌุฏ
3. Default Values (ุงูููู ุงูุงูุชุฑุงุถูุฉ)    โ ุฃุฎูุฑุงู
```

### ุนูุฏ ุญูุธ ุงูุฅุนุฏุงุฏุงุช:
1. โ ุงูุฅุนุฏุงุฏุงุช ุชููุชุจ ูู `data/config.json`
2. โ ุงูููู ูุญููุธ ูู Volume `atayb-data`
3. โ๏ธ ูุฌุจ ุฅุนุงุฏุฉ ุชุดุบูู ูุชุทุจูู ุงูุชุบููุฑุงุช

---

## ๐ฆ ูููุงุช ุงูุจูุงูุงุช

### ูุง ููุญูุธ ูู Volumes:

```
atayb-data/
  โโโ config.json           โ ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุนูููุงุช ุงูุฏุฎูู

atayb-uploads/
  โโโ *.pdf, *.jpg, etc.   โ ุงููููุงุช ุงููุฑููุนุฉ
```

### ูุซุงู ุนูู `config.json`:

```json
{
  "supabaseUrl": "https://xxxxx.supabase.co",
  "supabaseAnonKey": "eyJhbGc...",
  "supabaseServiceKey": "eyJhbGc...",
  "adminUsername": "admin",
  "adminPassword": "SecurePassword123!"
}
```

---

## ๐ก๏ธ ุงูุฃูุงู

### โ ููุงุท ุงูุฃูุงู ุงููุทุจูุฉ:

1. **Authentication Required**:
   - ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช ุชุชุทูุจ ุชุณุฌูู ุฏุฎูู
   - API routes ูุญููุฉ ุจู cookie check

2. **File Permissions**:
   - ุงูููู ููุญูุธ ูู ูุฌูุฏ data ุฏุงุฎู ุงูู Container
   - ููุท ุงูุชุทุจูู ููููู ุงููุฑุงุกุฉ/ุงููุชุงุจุฉ

3. **No Exposure**:
   - ุงูููุงุชูุญ ูุง ุชูุนุฑุถ ูู logs
   - ูููู ุฅุฎูุงุก/ุฅุธูุงุฑ ุงูููุงุชูุญ ูู ุงููุงุฌูุฉ

### โ๏ธ ุชุญุฐูุฑุงุช ุฃูููุฉ:

- ๐ ุงุณุชุฎุฏู ูููุฉ ูุฑูุฑ ูููุฉ ููุฃุฏูู
- ๐ ูุง ุชุดุงุฑู Service Role Key ูุน ุฃุญุฏ
- ๐ ุงุญูุธ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู config.json
- ๐ ุบูุฑ ูููุฉ ุงููุฑูุฑ ุจุดูู ุฏูุฑู

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุงูุฅุนุฏุงุฏุงุช ูุง ุชูุทุจู

```bash
# 1. ุชุญูู ูู ุงูู logs
docker logs atayb-app

# 2. ุชุญูู ูู ูุฌูุฏ ุงูููู
docker exec atayb-app cat /app/data/config.json

# 3. ุฃุนุฏ ุชุดุบูู ุงูู Container
docker restart atayb-app

# 4. ุชุญูู ูู ุงูู Volume
docker volume inspect atayb-data
```

### ุงููุดููุฉ: ูุณูุช ูููุฉ ุงููุฑูุฑ

```bash
# ุญู 1: ุญุฐู ููู config.json (ุณูุณุชุฎุฏู ENV vars)
docker exec atayb-app rm /app/data/config.json
docker restart atayb-app

# ุญู 2: ุชุนุฏูู ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ ูู Portainer Stack
# ุซู Update Stack
```

### ุงููุดููุฉ: ุฎุทุฃ ูู ุงูุงุชุตุงู ุจู Supabase

1. ุชุญูู ูู ุตุญุฉ Project URL
2. ุชุฃูุฏ ูู ูุณุฎ ุงูููุงุชูุญ ูุงููุฉ
3. ุชุญูู ูู ุชูููุฐ `SUPABASE_MIGRATION.sql`
4. ุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ูุณุงูุงุช ุฒุงุฆุฏุฉ

---

## ๐ ุงูููุงุฑูุฉ: ูุจู ูุจุนุฏ

### โ ูุจู (ุงูุทุฑููุฉ ุงููุฏููุฉ):

```
ุชุบููุฑ ูุนูููุงุช Supabase:
1. ุชุนุฏูู ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ ูู Portainer
2. Update Stack
3. ุงูุชุธุงุฑ ุฅุนุงุฏุฉ ุจูุงุก ุงูู Container
4. ูุฏ ุชููุฏ ุงูุจูุงูุงุช ุงููุญููุฉ

ุชุบููุฑ ูููุฉ ุงููุฑูุฑ:
1. ุชุนุฏูู ADMIN_PASSWORD ูู Portainer
2. Update Stack
3. ุฅุนุงุฏุฉ ุงูุชุดุบูู
```

### โ ุจุนุฏ (ุงูุทุฑููุฉ ุงูุฌุฏูุฏุฉ):

```
ุชุบููุฑ ูุนูููุงุช Supabase:
1. /admin/settings
2. ุฃุฏุฎู ุงูุจูุงูุงุช
3. ุงุฎุชุจุฑ โ ุงุญูุธ โ ุฃุนุฏ ุงูุชุดุบูู
4. ุฌุงูุฒ! (30 ุซุงููุฉ)

ุชุบููุฑ ูููุฉ ุงููุฑูุฑ:
1. /admin/settings
2. ุฃุฏุฎู ุงููููุฉ ุงูุฌุฏูุฏุฉ
3. ุงุญูุธ
4. ุฌุงูุฒ! (ููุฑู)
```

---

## ๐ ุงููุซุงุฆู ุงููุชุงุญุฉ

1. **DEPLOYMENT_SUMMARY.md** - ููุฎุต ุดุงูู ูููุดุฑ
2. **PORTAINER_DEPLOY.md** - ุฏููู ุงููุดุฑ ุนูู Portainer
3. **QUICK_START_AR.md** - ุฏููู ุงูุจุฏุก ุงูุณุฑูุน (5 ุฏูุงุฆู)
4. **SETTINGS_GUIDE.md** - ุฏููู ุงุณุชุฎุฏุงู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช โ **ุฌุฏูุฏ!**
5. **README.md** - ูุซุงุฆู ุงููุดุฑูุน ุงูุฑุฆูุณูุฉ

---

## โจ ุงูุฎูุงุตุฉ

### ุงููุดุฑูุน ุงูุขู ูุฏุนู:

1. โ **ูุดุฑ ุนูู Portainer ูู Stack**
2. โ **ูุงุนุฏุฉ ุจูุงูุงุช ุฎุงุฑุฌูุฉ (Supabase)**
3. โ **ุฅุฏุงุฑุฉ ุงูุฅุนุฏุงุฏุงุช ูู ููุญุฉ ุงูุชุญูู** โ ุฌุฏูุฏ!
4. โ **ุชุบููุฑ ูุนูููุงุช ุงูุฏุฎูู ุฏููุงููููุงู** โ ุฌุฏูุฏ!
5. โ **ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช** โ ุฌุฏูุฏ!
6. โ **ุญูุธ ุฏุงุฆู ูู Volumes**
7. โ **ูุซุงุฆู ุดุงููุฉ ุจุงูุนุฑุจูุฉ**

### ุงููุตูู ูููุฒุงูุง ุงูุฌุฏูุฏุฉ:

```
ุงูุฏุงุดุจูุฑุฏ: http://server:3000/admin
ุงูุฅุนุฏุงุฏุงุช: http://server:3000/admin/settings
```

๐ **ูู ุดูุก ุฌุงูุฒ ูููุดุฑ ูุงูุงุณุชุฎุฏุงู!**
